<div class="container">
    <form (ngSubmit)="onSubmit()" #dataForm="ngForm">
        <p *ngIf="errorMessage">{{errorMessage}}</p>
        <div [formGroup]="dataFormGroup">
            <div class="form-group my-2">
                <label for="type">Data Type</label>
                <select class="form-select" aria-label="Default select example" id="type" required name="type"
                    formControlName="type">
                    <option selected>Open this select menu</option>
                    <option value="1">JSON</option>
                    <option value="2">HTML</option>
                </select>
            </div>

            <div class="form-group my-2">
                <div class="input-group">
                    <input type="text" formControlName="apiUrl" id="apiUrl" class="form-control"
                        placeholder="Enter API url">
                    <button type="button" class="btn btn-outline-secondary" (click)="executeApi()">Execute</button>

                </div>
            </div>

            <div class="form-group my-2">
                <div class="input-group">
                    <input type="text" formControlName="query" id="query" class="form-control" aria-label="Enter Query"
                        placeholder="Query">
                    <button type="button" class="btn btn-outline-secondary" (click)="executeQuery()">Execute</button>

                </div>
            </div>

            <div class="form-check  my-2">
                <input class="form-check-input" type="checkbox" formControlName="showCards" id="showCards">
                <label class="form-check-label" for="showCards">
                    Show Cards
                </label>
            </div>
            <div class="form-group my-2">
                <div class="form-floating">
                    <textarea class="form-control" placeholder="Enter Data" id="data" style="height: 100px" id="data"
                        required name="data" formControlName="data"></textarea>
                    <label for="datafloatingTextarea">Data to process</label>
                </div>
            </div>


            <div class="form-group my-2" *ngIf="getControlValue('type')==2">
                <label for="predefinedOperations">PreDefined Operations</label>
                <select class="form-select" aria-label="Default select example" id="predefinedOperations" required
                    name="predefinedOperations" formControlName="predefinedOperations">
                    <option selected>Open this select menu</option>
                    <option value="1">Fetch Images</option>
                </select>
            </div>
        </div>


        <button type="submit" class="btn btn-success" [disabled]="!dataForm.form.valid">Submit</button>
    </form>
</div>

<div class="form-floating my-4">
    <textarea class="form-control" placeholder="Results" id="results" style="height: 100px" id="data" required
        name="results" formControlName="results" [value]="resultsString"></textarea>
    <label for="datafloatingTextarea">Data Results </label>
</div>

<btsp-card-container [dataSource]="dataSource"></btsp-card-container>